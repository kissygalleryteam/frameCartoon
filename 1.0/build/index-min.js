/*! frameCartoon - v1.0 - 2013-10-31 3:14:14 PM
* Copyright (c) 2013 妙净; Licensed  */
KISSY.add("gallery/frameCartoon/1.0/index",function(a,b){function c(a){var b=this;b.el=d(a.el),b._childEl=b.el.one("span"),b.frameNum=a.frameNum||8,b.speed=a.speed||150,b.frameWidth=a.frameWidth||130,b.frameHeight=a.frameHeight||192,b.bg=a.bg||"",b.bgpng8=a.bgpng8||"",b.bgDirection=a.bgDirection||"",b._times=0,b._isRunning=!0,b._initStyle()}var d=b.one;return a.augment(c,{_initStyle:function(){var b,c=this;b=a.UA.ie<7?c.bgpng8?{backgroundImage:'url("'+c.bgpng8+'")'}:{background:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c.bg+"')"}:{backgroundImage:'url("'+c.bg+'")'};var d={position:"relative",overflow:"hidden",height:c.frameHeight+"px",width:c.frameWidth+"px"};c.el.css(d);var e=a.merge({display:"block",textIndent:"-999px",height:"vertical"==c.bgDirection?c.frameHeight*c.frameNum+"px":c.frameHeight+"px",width:"vertical"==c.bgDirection?c.frameWidth+"px":c.frameWidth*c.frameNum+"px",position:"absolute"},b);c._childEl.css(e)},_changeFrame:function(){var a=this;if(this._isRunning){var b,c;a.bgDirection?(b=a._times*a.frameHeight,c="top"):(b=a._times*a.frameWidth,c="left"),a._childEl.css(c,"-"+b+"px"),setTimeout(function(){a._times==a.frameNum-1?a._times=0:a._times++,a._changeFrame()},a.speed)}},start:function(){this._isRunning=!0,this._changeFrame()},stop:function(){this._isRunning=!1}}),c},{requires:["node"]});